实习第四周总结：

本周完成：

- 采用yolov3模型对车辆进行检测；模型的ap值为0.93；
- 从结果来看，对小目标的检测结果还不是很好；
- 针对小目标，对模型进行更改：将输入图片大小由416X416,调整为608X608,加强模型对小目标的敏感性；
- 为了应用到项目，对模型进行了裁剪；目前从445M压缩到了48M,验证集上ap值下降约1%；下步继续尝试对模型进行压缩，病保持性能在可接受范围之内；
- 在赵江锐指导下学习了对新采集的数据集进行标注的方法；





下周计划：

- 在交通标志检测数据集上应用yolov3，查看模型的最终效果，和ssd的结果进行对比，形成分析；
- 搜集资料：yolov3针对小目标检测有哪些方法可以提高模型的性能，能否应用到我们的实际需求中？
- 继续对模型进行裁剪，看能否裁剪到10M以下，并保证模型的性能；









实习月度总结：

自6月26日入职终端芯片以来，时间已经过去一个月。在这一个月的时间里，从校园走向了工作岗位，并在工作中逐步探索怎么将理论知识应用到实际需求中，怎么发现问题和解决问题；这些是在校园里接触不到的东西。我很高兴当初选择了来华为实习，在这里的第一个月我过得很充实、也找到了乐趣所在。感谢张老师在方向上的指导，以及组里其他人提供的帮助，还有一起实习的两个小伙伴在一起成长。

在过去的一个月里主要完成的工作：

- 车道线检测相关调研：
  - 研究了17年以来车道线检测相关的方法，针对我们项目的具体要求，和张老师、组里其他成员讨论后，认为LaneNet方法具有可行性；
  - 对车道线检测相关的公开数据集进行了初步分析；（包括数据量，场景分析，标注形式等）
  - 针对LaneNet论文中作者提供的代码进行分析，网络结构已经清晰，针对tusimple数据集进行相关更改，目前已经可以跑通进行测试；带项目需要时可以快速部署；
- 追踪算法的相关研究：
  - 针对追踪算法，主要学习了基于核相关滤波器的目标跟踪算法；
  - 目前项目主要应用目标检测+卡尔曼滤波的方法，针对此方法的具体细节，下步要跟孙东明探讨学习；
- 基于yolov3的车辆检测
  - 针对项目的整体进度安排，在第三周开始用yolov3对车辆进行检测，目标是与ssd模型进行对比，形成分析；
  - 对kitti_2D数据集进行转化格式转化，使数据满足模型的要求格式；（该过程比较繁琐，细节较多；目前转化的具体过程已形成脚本文件，之后应用时可直接调用脚本）
  - 对模型环境进行相关配置和更改；（配置文件时，针对自己的任务需求要更改的东西比较多；之前进行了记录，还没有进行详细的总结，下步完成；）
  - 训练模型，对结果进行初步分析；
    - 对小目标的效果不是特别好（小目标具体的像素值还没有进行分析）；
    - 对于有遮挡的车辆能检测出目标，但当目标较小时，若两个目标有折叠，会预测为一个目标；
  - 针对小目标可尝试的方法：
    - 将训练图片进行有折叠的crop（保证目标不被拆开），在crop之后的数据集上进行训练；在推断时，也将要检测的图片进行crop，在crop之后的每张子图上进行推断，结束后将图片进行拼接，还原成原始的检测图片；（该方法有人在5000x8000pixel 的图片上检测15x15pixel 的目标，准确率很高）但针对我们的实时性要求，能否可行存疑？？待尝试。
    - 我们数据集的图片大小为1224X370，可将图片resize到1216X352（目的满足yolov3的输入要求），在此基础上训练模型，该方法可行，而且调整输入图片调整为与原始图片大小相近的满足模型要求的大小，在小目标的检测上已经得到了某些任务的验证，该方法可行，并在下步计划中优先进行。
- 模型压缩与加速的研究和实现：
  - 原始模型训练出的结果一般很大，无法满足部署的要求，因此要对模型进行相关处理，以达到部署的要求；
  - 针对模型小型化的方法进行了学习和总结，主要mobilenetV1&v2、shuuffleNet；（总结的文档正在进行中）
  - 模型裁剪方法，挑选了基于BN层的γ系数进行裁剪的方法来对yolov3模型进行裁剪；初步效果比较明显：模型大小从245M减小到了48M左右，AP值只下降了1%左右；
  - 下部继续应用该方法进行模型的裁剪，以满足部署要求；





下部计划与安排：

- 按照项目的进度安排，下步优先用yolov3模型对交通标志进行检测；
- 模型的裁剪和压缩；
- 在模型达到和ssd同一个量级之后，与ssd模型的结果进行系统的对比和分析；
- 争取在实习结束前车道线检测能出初步的结果；
